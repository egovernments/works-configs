{
  "key": "nominal-muster-roll",
  "documentType": "CONSOLIDATED_RECEIPT",
  "DataConfigs": {
    "moduleName": "rainmaker-common",
    "version": "1.0.0",
    "baseKeyPath": "$.MusterRoll.*",
    "entityIdPath": "$.id",
    "isCommonTableBorderRequired": true,
    "mappings": [
      {
        "topic": "common-pdf-generation-3",
        "mappings": [
          {
            "direct": [
              {
                "variable": "pdf_header",
                "value": {
                  "path": "TENANT_TENANTS_PG_CITYA_PDF_HEADER"
                },
                "type": "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-pg"
                }
              },
              {
                "variable": "work_order_number",
                "value": {
                  "path": "WORKS_ORDER_NO"
                },
                "type": "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-common"
                }
              },
              {
                "variable": "work_order_number",
                "value": {
                  "path": "WORKS_ORDER_NO"
                },
                "type": "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-common"
                }
              },
              {
                "variable": "project_id",
                "value": {
                  "path": "WORKS_PROJECT_ID"
                },
                "type": "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-common"
                }
              },
              {
                "variable": "project_description",
                "value": {
                  "path": "PROJECTS_DESCRIPTION"
                },
                "type": "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-common"
                }
              },
              {
                "variable": "name_of_cbo",
                "value": {
                  "path": "COMMON_NAME_OF_CBO"
                },
                "type": "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-common"
                }
              },
              {
                "variable": "role_of_cbo",
                "value": {
                  "path": "COMMON_ROLE_OF_CBO"
                },
                "type": "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-common"
                }
              },
              {
                "variable": "number_of_wage_seekers",
                "value": {
                  "path": "MUSTER_ROLLS_NO_OF_WAGE_SEEKERS"
                },
                "type": "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-muster-rolls"
                }
              },
              {
                "variable": "days_worked",
                "value": {
                  "path": "MUSTER_ROLLS_DAYS_WORKED"
                },
                "type": "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-muster-rolls"
                }
              },
              {
                "variable": "mon_day",
                "value": {
                  "path": "$.individualEntries[0].attendanceEntries[0].time"
                },
                "type": "date"
              },
              {
                "variable": "tue_day",
                "value": {
                  "path": "$.individualEntries[0].attendanceEntries[1].time"
                },
                "type": "date"
              },
              {
                "variable": "wed_day",
                "value": {
                  "path": "$.individualEntries[0].attendanceEntries[2].time"
                },
                "type": "date"
              },
              {
                "variable": "thu_day",
                "value": {
                  "path": "$.individualEntries[0].attendanceEntries[3].time"
                },
                "type": "date"
              },
              {
                "variable": "fri_day",
                "value": {
                  "path": "$.individualEntries[0].attendanceEntries[4].time"
                },
                "type": "date"
              },
              {
                "variable": "sat_day",
                "value": {
                  "path": "$.individualEntries[0].attendanceEntries[5].time"
                },
                "type": "date"
              },
              {
                "variable": "days_measured",
                "value": {
                  "path": "MUSTER_ROLLS_DAYS_MEASURED"
                },
                "type": "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-muster-rolls"
                }
              },
              {
                "variable": "per_day_wage",
                "value": {
                  "path": "MUSTER_ROLLS_PER_DAY_WAGE"
                },
                "type": "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-muster-rolls"
                }
              },
              {
                "variable": "total_wage",
                "value": {
                  "path": "MUSTER_ROLLS_TOTAL_WAGE"
                },
                "type": "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-muster-rolls"
                }
              },
              {
                "variable": "_signature",
                "value": {
                  "path": "MUSTER_ROLLS_SIGNATURE"
                },
                "type": "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-muster-rolls"
                }
              },
              {
                "variable": "total_attendance",
                "value": {
                  "path": "MUSTER_ROLLS_TOTAL_ATTENDANCE_IN_DAYS"
                },
                "type": "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-muster-rolls"
                }
              },
              {
                "variable": "amount",
                "value": {
                  "path": "$.additionalDetails.amount"
                }
              },
              {
                "variable": "musterRollStatus",
                "value": {
                  "path": "$.musterRollStatus"
                }
              },
              {
                "variable": "projectNumber",
                "value": {
                  "path": "$.musterRollNumber"
                }
              },
              {
                "variable": "projectNumber",
                "value": {
                  "path": "$.musterRollNumber"
                }
              },
              {
                "variable": "nominal_muster_roll",
                "value": {
                  "path": "MUSTER_ROLLS_NOMINAL_MUSTER_ROLL"
                },
                "type": "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-muster-rolls"
                }
              },
              {
                "variable": "quantity_of_work",
                "value": {
                  "path": "MUSTER_ROLLS_QUANTITY_OF_WORK_IN_DAYS"
                },
                "type": "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-muster-rolls"
                }
              },
              {
                "variable": "wage_amount",
                "value": {
                  "path": "MUSTER_ROLLS_WAGE_AMOUNT"
                },
                "type": "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-muster-rolls"
                }
              },
              {
                "variable": "_total",
                "value": {
                  "path": "RT_TOTAL"
                },
                "type": "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-common"
                }
              },
              {
                "variable": "projectType",
                "value": {
                  "path": "$.projectType"
                },
                "type": "label",
                "localisation": {
                  "required": true,
                  "prefix": "COMMON_MASTERS",
                  "module": "rainmaker-common-masters"
                }
              },
              {
                "variable": "s_no",
                "value": {
                  "path": "WORKS_SNO"
                },
                "type": "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-common"
                }
              },
              {
                "variable": "registration_id",
                "value": {
                  "path": "EXP_REG_ID"
                },
                "type": "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-expenditure"
                }
              },
              {
                "variable": "number_of_the_individual",
                "value": {
                  "path": "ATM_NAME_OF_THE_INDIVIDUAL"
                },
                "type": "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-attendencemgmt"
                }
              },
              {
                "variable": "_mon",
                "value": {
                  "path": "ATM_MON"
                },
                "type": "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-attendencemgmt"
                }
              },
              {
                "variable": "_tue",
                "value": {
                  "path": "ATM_TUE"
                },
                "type": "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-attendencemgmt"
                }
              },
              {
                "variable": "_wed",
                "value": {
                  "path": "ATM_WED"
                },
                "type": "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-attendencemgmt"
                }
              },
              {
                "variable": "_thr",
                "value": {
                  "path": "ATM_THR"
                },
                "type": "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-attendencemgmt"
                }
              },
              {
                "variable": "_fri",
                "value": {
                  "path": "ATM_FRI"
                },
                "type": "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-attendencemgmt"
                }
              },
              {
                "variable": "_sat",
                "value": {
                  "path": "ATM_SAT"
                },
                "type": "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-attendencemgmt"
                }
              },
              {
                "variable": "_sun",
                "value": {
                  "path": "ATM_SUN"
                },
                "type": "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-attendencemgmt"
                }
              },
              {
                "variable": "_amount",
                "value": {
                  "path": "ATM_AMOUNT_IN_RS"
                },
                "type": "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-attendencemgmt"
                }
              },
              {
                "variable": "_status",
                "value": {
                  "path": "CORE_COMMON_STATUS"
                },
                "type": "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-common"
                }
              },
              {
                "variable": "bank_account",
                "value": {
                  "path": "ATM_BANK_ACCOUNT_DETAILS"
                },
                "type": "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-attendencemgmt"
                }
              },
              {
                "variable": "aadhar_number",
                "value": {
                  "path": "ATM_WAGE_SEEKER_AADHAR"
                },
                "type": "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-attendencemgmt"
                }
              },
              {
                "variable": "guardian_name",
                "value": {
                  "path": "FATHER_NAME"
                },
                "type": "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-common"
                }
              },
              {
                "variable": "_skill",
                "value": {
                  "path": "MUSTER_ROLLS_CATEGORY_OR_SKILL"
                },
                "type": "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-muster-rolls"
                }
              },
              {
                "variable": "day_worked",
                "value": {
                  "path": "ES_COMMON_SKILL_CATEGORY"
                },
                "type": "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-common"
                }
              },
              {
                "variable": "_signature",
                "value": {
                  "path": "MUSTER_ROLLS_SIGNATURE"
                },
                "type": "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-muster-rolls"
                }
              },
              {
                "variable": "musterRollNumber",
                "value": {
                  "path": "$.musterRollNumber"
                }
              },
              {
                "variable": "projectId",
                "value": {
                  "path": "$.additionalDetails.projectId"
                }
              },
              {
                "variable": "actualTotalAttendance",
                "value": {
                  "path": "$.individualEntries[0].actualTotalAttendance"
                }
              },
              {
                "variable": "mon_day_attendance",
                "value": {
                  "path": "$.individualEntries[0].attendanceEntries[0].attendance"
                }
              },
              {
                "variable": "nominal_muster_roll",
                "value": {
                  "path": "NOMINAL_MUSTER_ROLLS"
                },
                "type": "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-muster-rolls"
                }
              },
              {
                "variable": "arrears",
                "value": {
                  "path": "$.individualEntries"
                },
                "type": "function",
                "format": "var y=[], x=arguments[0]; for(var i=0;i<x.length;i++){function color(attendance){return (attendance == 'F' ? '#095729' : (attendance == 'H'?'#F6B458':'#ff0000'))};var half_attendance ='H'; var full_attendance ='F';var absent ='A';var attendance_of_sat = ((x[i].attendanceEntries[5].attendance)>0.5?full_attendance:((x[i].attendanceEntries[5].attendance)>0?half_attendance:absent));var attendance_of_fri = ((x[i].attendanceEntries[4].attendance)>0.5?full_attendance:((x[i].attendanceEntries[4].attendance)>0?half_attendance:absent));var attendance_of_thu = ((x[i].attendanceEntries[3].attendance)>0.5?full_attendance:((x[i].attendanceEntries[3].attendance)>0?half_attendance:absent));var attendance_of_wed = ((x[i].attendanceEntries[2].attendance)>0.5?full_attendance:((x[i].attendanceEntries[2].attendance)>0?half_attendance:absent));var attendance_of_tue = ((x[i].attendanceEntries[1].attendance)>0.5?full_attendance:((x[i].attendanceEntries[1].attendance)>0?half_attendance:absent));var attendance_of_mon = ((x[i].attendanceEntries[0].attendance)>0.5?full_attendance:((x[i].attendanceEntries[0].attendance)>0?half_attendance:absent));y.push({'attendance_of_sun':'A','attendance_of_sat':attendance_of_sat,'attendance_of_fri':attendance_of_fri,'attendance_of_thu':attendance_of_thu,'attendance_of_wed':attendance_of_wed,'attendance_of_tue':attendance_of_tue,'attendance_of_mon':attendance_of_mon,'bank_account_details':x[i].additionalDetails.bankDetails,'aadhar_number':x[i].additionalDetails.aadharNumber,'skill':x[i].additionalDetails.skillValue,'background_color':( (i%2) == 0 ? '' :'#eeeeee') ,'sl_no':i+1,'name_of_the_individual':x[i].additionalDetails.userName,'guardian_name':x[i].additionalDetails.fatherName,'actualTotalAttendance':x[i].actualTotalAttendance, 'attendance':x[i].attendanceEntries[0].attendance,'skillValue':x[i].additionalDetails.skillValue,'sat_color_of_attendance': color(attendance_of_sat),'mon_color_of_attendance': color(attendance_of_mon),'tue_color_of_attendance': color(attendance_of_tue),'wed_color_of_attendance': color(attendance_of_wed),'thu_color_of_attendance': color(attendance_of_thu),'fri_color_of_attendance': color(attendance_of_fri),'sun_color_of_attendance':'#ff0000' }); } return y; "
              },
              {
                "variable": "total",
                "value": {
                  "path": "$.individualEntries"
                },
                "type": "function",
                "format": "var y=[],x=arguments[0]; var fri_day_total_attendance=0; var mon_day_total_attendance=0; var tue_day_total_attendance=0; var wed_day_total_attendance=0; var thu_day_total_attendance=0; var thu_day_total_attendance=0; var sat_day_total_attendance=0; if(x){for(var i=0;i<x.length;i++){ mon_day_total_attendance= mon_day_total_attendance + x[i].attendanceEntries[0].attendance; tue_day_total_attendance= tue_day_total_attendance + x[i].attendanceEntries[1].attendance; wed_day_total_attendance= wed_day_total_attendance + x[i].attendanceEntries[2].attendance; thu_day_total_attendance= thu_day_total_attendance + x[i].attendanceEntries[3].attendance; fri_day_total_attendance= fri_day_total_attendance + x[i].attendanceEntries[4].attendance; sat_day_total_attendance= sat_day_total_attendance + x[i].attendanceEntries[5].attendance; }; y.push({'mon_day_total_attendance':mon_day_total_attendance, 'tue_day_total_attendance':tue_day_total_attendance, 'wed_day_total_attendance': wed_day_total_attendance, 'thu_day_total_attendance':thu_day_total_attendance, 'fri_day_total_attendance':fri_day_total_attendance, 'sat_day_total_attendance':sat_day_total_attendance })}return y;"
              }
            ]
          },
          {
            "externalAPI": [
              {
                "path": "http://egov-mdms-service:8080/egov-mdms-service/v1/_get",
                "queryParam": "moduleName=tenant&masterName=tenants&tenantId=pg&filter=%5B?(@.code=='{$.tenantId}')%5D",
                "apiRequest": null,
                "responseMapping": [
                  {
                    "variable": "address",
                    "value": "$.MdmsRes.tenant.tenants[0].address"
                  },
                  {
                    "variable": "address",
                    "value": "$.MdmsRes.tenant.tenants[0].address"
                  },
                  {
                    "variable": "phoneNumber",
                    "value": "$.MdmsRes.tenant.tenants[0].contactNumber"
                  },
                  {
                    "variable": "website",
                    "value": "$.MdmsRes.tenant.tenants[0].domainUrl"
                  },
                  {
                    "variable": "email",
                    "value": "$.MdmsRes.tenant.tenants[0].emailId"
                  },
                  {
                    "variable": "logoImage",
                    "value": "$.MdmsRes.tenant.tenants[0].logoId",
                    "type": "image"
                  },
                  {
                    "variable": "logo-header",
                    "value": "$.MdmsRes.tenant.tenants[0].code",
                    "localisation": {
                      "required": true,
                      "prefix": "TENANT_TENANTS",
                      "module": "rainmaker-pg"
                    }
                  },
                  {
                    "variable": "logo-header",
                    "value": "$.MdmsRes.pdfHeader",
                    "localisation": {
                      "required": true,
                      "prefix": "TENANT_TENANTS",
                      "module": "rainmaker-pg"
                    }
                  }
                ]
              }
            ]
          }
        ]
      }
    ]
  }
}